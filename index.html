<!DOCTYPE html>
<html>
<head>
	<title>Brian Gaffney &mdash; Deb.ug</title>
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
	<div id="wrapper">

		<div class="box">
			<div class="padding_wrapper">
				<h1>Brian Gaffney</h1>
				<p>Web developer and start up entrepreneur</p>
				<p><a href="mailto:brian@deb.ug">brian@deb.ug</a></p>
				<p><a href="http://au.linkedin.com/pub/brian-gaffney-brian-setkick-com-brian-deb-ug/42/60a/807">LinkedIn</a></p>
				<p><a href="http://setkick.com">Setkick.com</a> &mdash; Online pre-production for film and TV</p>
			</div>
		</div>

		<div class="box">
			<div class="padding_wrapper">
				<h2>Projects</h2>
				<p><a href="http://setkick.com">Setkick.com</a> &mdash; Online pre-production for film and TV</p>
			</div>
		</div>

		<div class="box">
			<div id="canvas"></div>
		</div>

		<div class="box double-wide">
			<div class="padding_wrapper">
				<h3> Anaconda goes here </h3>
			</div>
		</div>

	</div>




	<script type="text/javascript" src="js/masonry.min.js"></script>

	<script type="text/javascript" src="js/raphael.min.js"></script>
	<script type="text/javascript">

		window.onload = init;


	/*	  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-32936832-1']);
		  _gaq.push(['_trackPageview']);

		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
	*/

		function init() {
			animate();

			var wall = new Masonry( document.getElementById('wrapper'));
		}

		//Random number between -20 and 0
		function random_point() {
			min = -20;
			max = 0;

			return rand_between(min, max);
		}

		function rand_between(min, max) {
			return Math.floor(Math.random() * (max - min + 1)) + min;
		}

		function get_curve_points() {
			points = [];
			var p = [];
			for (var i = 25; i < 45; i += 5) {
				end_point_x = i;
				end_point_y = random_point();

				p = [end_point_x, end_point_y];
				points.push(p);

				// path_string += end_point_x + ',' + end_point_y;
			}

			return points;
		}

		function jitter_curve_points(curve_points) {
			var tmp_curve_points = [];
			for(var i in curve_points) {
				tmp_curve_points[i] = [];
				tmp_curve_points[i][0] = curve_points[i][0] + rand_between(-3,3);
				tmp_curve_points[i][1] = curve_points[i][1] + rand_between(-3,3);
			}

			return tmp_curve_points;
		}

		function animate() {
			// Docs on paths
			// http://www.w3.org/TR/SVG11/paths.html
			// http://raphaeljs.com/reference.html

			var paper = Raphael("canvas", 310, 310);

			var origin = [20,280];
			var end = [290,280];

			var total_curves = 28;
			var x_offset = 2;
			var y_offset = 10;
			var curve_width = 3;

			//Get curve points
			curve_points = get_curve_points();

			//Draw each curve
			for (var i = 0; i < total_curves; i++) {

				console.log('Drawing curve ' + i);

				path_string = 'M' + origin[0] + ',' + origin[1];
				origin[0] += x_offset;
				origin[1] -= y_offset;

				path_string += 't'; //t = smooth quadratic BÃ©zier curveto

				points = jitter_curve_points(curve_points);

				//Each curve segment
				for(var j in points) {
					//If first time through the loop
					if(j) {
						path_string += ',';
					}

					x = points[j][0];
					y = points[j][1];

					//End point of curve segment
					end_point_x = points[j][0];
					end_point_y = points[j][1];
					path_string += end_point_x + ',' + end_point_y;
				}

				//Line to end point
				path_string += 'T' + end[0] + ',' + end[1];
				end[0] -= x_offset;
				end[1] -= y_offset;

				console.log(path_string);
				curve = paper.path(path_string);
				curve.attr({
					stroke: 'grey',
					'stroke-width': curve_width
				});

				if(curve_width >= 0.1) {
					curve_width -= 0.1;
				}
			}

			// curve.animate({
			// 	'stroke-width': 5
			// }, 1000, 'linear', function() {
			// 	console.log('Finished');
			// });

		}

		</script>




</body>
</html>